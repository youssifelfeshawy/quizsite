<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Quiz Player</title>
    <style>
        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-card: #0f3460;
            --text-primary: #eee;
            --text-secondary: #bbb;
            --accent: #3498db;
            --accent-hover: #2980b9;
            --correct: #2ecc71;
            --wrong: #e74c3c;
            --border: #2c3e50;
        }

        body.light-mode {
            --bg-primary: #eef2f3;
            --bg-secondary: #fff;
            --bg-card: #fff;
            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
            --accent: #3498db;
            --accent-hover: #2980b9;
            --correct: #2ecc71;
            --wrong: #e74c3c;
            --border: #ecf0f1;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            display: flex;
            justify-content: center;
            padding: 20px;
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        .container {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 700px;
        }

        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background-color: var(--accent);
        }

        input:checked+.slider:before {
            transform: translateX(26px);
        }

        h1,
        h2 {
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .btn {
            padding: 12px 24px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background 0.3s;
            width: 100%;
            margin-top: 15px;
        }

        .btn:hover {
            background: var(--accent-hover);
        }

        .btn-secondary {
            background: #95a5a6;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .btn-danger {
            background: var(--wrong);
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .progress-container {
            width: 100%;
            background: var(--border);
            height: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        #progress-bar {
            width: 0%;
            height: 100%;
            background: var(--accent);
            transition: 0.3s;
        }

        .question-meta {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .question {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .options-grid {
            display: grid;
            gap: 10px;
        }

        .option {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            background: var(--bg-secondary);
            text-align: left;
            font-size: 1rem;
            color: var(--text-primary);
        }

        .option-letter {
            font-weight: bold;
            min-width: 25px;
            color: var(--accent);
        }

        .option:hover:not(:disabled) {
            background: var(--bg-primary);
            border-color: var(--accent);
        }

        .correct {
            background: var(--correct) !important;
            border-color: var(--correct) !important;
            color: white !important;
            font-weight: bold;
        }

        .correct .option-letter {
            color: white !important;
        }

        .wrong {
            background: var(--wrong) !important;
            border-color: var(--wrong) !important;
            color: white !important;
        }

        .wrong .option-letter {
            color: white !important;
        }

        #result {
            text-align: center;
        }

        .score-text {
            font-size: 3rem;
            color: var(--accent);
            display: block;
            margin: 20px 0;
        }

        .wrong-answers {
            text-align: left;
            margin-top: 30px;
            padding: 20px;
            background: var(--bg-secondary);
            border-radius: 10px;
        }

        .wrong-item {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }

        .wrong-item:last-child {
            border-bottom: none;
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>
    <div class="theme-toggle">
        <label class="switch">
            <input type="checkbox" id="theme-switch">
            <span class="slider"></span>
        </label>
    </div>

    <div class="container">
        <div id="quiz-screen">
            <div class="progress-container">
                <div id="progress-bar"></div>
            </div>
            <div class="question-meta" id="q-count"></div>
            <div class="question" id="q-text"></div>
            <div class="options-grid" id="options-container"></div>
            <div class="button-container" style="display: flex; gap: 10px; margin-top: 15px;">
                <button id="prev-btn" class="btn btn-secondary" onclick="prevQuestion()"
                    style="display: none; flex: 1;">‚Üê Previous</button>
                <button id="next-btn" class="btn" onclick="nextQuestion()" style="flex: 1;">Next ‚Üí</button>
            </div>
        </div>

        <div id="result-screen" class="hidden">
            <h2>Quiz Completed!</h2>
            <span class="score-text" id="final-score">0/0</span>
            <div id="wrong-answers-section" class="wrong-answers"></div>
            <button class="btn" onclick="restartQuiz()">üîÑ Restart Quiz</button>
        </div>
    </div>

    <script>
        let questions = [];
        let currentIdx = 0;
        let score = 0;
        let userAnswers = [];
        let originalQuestions = [];
        let shuffleQuestionsEnabled = true; // Set to true to enable shuffling questions
        let shuffleAnswersEnabled = true; // Set to true to enable shuffling answers

        // Hard-coded questions - add your questions here
        const hardcodedQuestions = [
            {
                "question": "Which data structure is most commonly used to support efficient full-text search in information retrieval systems?",
                "options": [
                    "B-tree",
                    "Hash table",
                    "Inverted index",
                    "Linked list"
                ],
                "answer": 2
            },
            {
                "question": "Which step in query preprocessing converts words to their base or root form?",
                "options": [
                    "Tokenization",
                    "Normalization",
                    "Stemming",
                    "Stop-word removal"
                ],
                "answer": 2
            },
            {
                "question": "In TF-IDF weighting, the IDF component primarily measures:",
                "options": [
                    "Term frequency in a document",
                    "Term importance across the collection",
                    "Document length",
                    "Query length"
                ],
                "answer": 1
            },
            {
                "question": "Which retrieval model retrieves documents only if they exactly satisfy the query conditions?",
                "options": [
                    "Vector Space Model",
                    "Probabilistic Model",
                    "Boolean Model",
                    "Language Model"
                ],
                "answer": 2
            },
            {
                "question": "Which ranking approach represents documents and queries as vectors in a multidimensional space?",
                "options": [
                    "Boolean ranking",
                    "Vector Space ranking",
                    "Rule-based ranking",
                    "Frequency ranking"
                ],
                "answer": 1
            },
            {
                "question": "Stop-word removal is mainly used to:",
                "options": [
                    "Increase document length",
                    "Improve indexing speed and effectiveness",
                    "Increase recall only",
                    "Replace stemming"
                ],
                "answer": 1
            },
            {
                "question": "Precision in information retrieval measures:",
                "options": [
                    "The fraction of relevant documents retrieved",
                    "The fraction of retrieved documents that are relevant",
                    "The fraction of irrelevant documents retrieved",
                    "The overall system correctness"
                ],
                "answer": 1
            },
            {
                "question": "Which metric balances both precision and recall?",
                "options": [
                    "Accuracy",
                    "Recall",
                    "F1-score",
                    "Specificity"
                ],
                "answer": 2
            },
            {
                "question": "Which component of an inverted index stores the list of documents containing a term?",
                "options": [
                    "Dictionary",
                    "Posting list",
                    "Token stream",
                    "Query log"
                ],
                "answer": 1
            },
            {
                "question": "Which model assumes uncertainty in document relevance and uses probability estimates?",
                "options": [
                    "Boolean Model",
                    "Vector Space Model",
                    "Probabilistic Model",
                    "Graph-based Model"
                ],
                "answer": 2
            },
            {
                "question": "An inverted file is inefficient for large document collections.",
                "options": [
                    "True",
                    "False"
                ],
                "answer": 1
            },
            {
                "question": "Tokenization is the first step in query preprocessing.",
                "options": [
                    "True",
                    "False"
                ],
                "answer": 0
            },
            {
                "question": "Stemming and lemmatization always produce identical results.",
                "options": [
                    "True",
                    "False"
                ],
                "answer": 1
            },
            {
                "question": "The Boolean model supports partial document matching.",
                "options": [
                    "True",
                    "False"
                ],
                "answer": 1
            },
            {
                "question": "TF-IDF assigns higher weight to rare terms in the collection.",
                "options": [
                    "True",
                    "False"
                ],
                "answer": 0
            },
            {
                "question": "Precision can be high even when recall is low.",
                "options": [
                    "True",
                    "False"
                ],
                "answer": 0
            },
            {
                "question": "Accuracy is always a suitable metric for evaluating retrieval systems.",
                "options": [
                    "True",
                    "False"
                ],
                "answer": 1
            },
            {
                "question": "Ranking algorithms aim to order documents by estimated relevance.",
                "options": [
                    "True",
                    "False"
                ],
                "answer": 0
            },
            {
                "question": "Query normalization may include case folding.",
                "options": [
                    "True",
                    "False"
                ],
                "answer": 0
            },
            {
                "question": "F1-score is the harmonic mean of precision and recall.",
                "options": [
                    "True",
                    "False"
                ],
                "answer": 0
            }
        ];

        // Theme toggle
        const themeSwitch = document.getElementById('theme-switch');
        themeSwitch.addEventListener('change', function () {
            document.body.classList.toggle('light-mode');
        });

        // Add reload warning
        window.onbeforeunload = function () {
            return "Reloading the page will reset everything. Are you sure?";
        };

        function startQuiz() {
            currentIdx = 0;
            score = 0;
            userAnswers = [];

            questions = JSON.parse(JSON.stringify(hardcodedQuestions));
            originalQuestions = JSON.parse(JSON.stringify(hardcodedQuestions));

            // Apply shuffling
            if (shuffleQuestionsEnabled) {
                questions.sort(() => Math.random() - 0.5);
            }

            if (shuffleAnswersEnabled) {
                questions.forEach(q => {
                    const correctAnswer = q.options[q.answer];
                    // Create array of indices and shuffle them
                    const indices = q.options.map((_, i) => i);
                    for (let i = indices.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [indices[i], indices[j]] = [indices[j], indices[i]];
                    }
                    // Reorder options based on shuffled indices
                    const newOptions = indices.map(i => q.options[i]);
                    q.options = newOptions;
                    // Update answer index
                    q.answer = q.options.indexOf(correctAnswer);
                });
            }

            document.getElementById('quiz-screen').classList.remove('hidden');
            document.getElementById('result-screen').classList.add('hidden');

            loadQuestion();
        }

        function loadQuestion() {
            if (currentIdx >= questions.length) {
                showResult();
                return;
            }

            const q = questions[currentIdx];
            document.getElementById('q-count').innerText = `Question ${currentIdx + 1} of ${questions.length}`;
            document.getElementById('progress-bar').style.width = `${((currentIdx) / questions.length) * 100}%`;
            document.getElementById('q-text').innerText = q.question;

            const container = document.getElementById('options-container');
            container.innerHTML = '';

            const nextBtn = document.getElementById('next-btn');
            nextBtn.style.display = 'none';
            nextBtn.innerText = currentIdx === questions.length - 1 ? 'Submit' : 'Next ‚Üí';

            document.getElementById('prev-btn').style.display = currentIdx > 0 ? 'block' : 'none';

            const letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'];

            q.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'option';

                const letter = document.createElement('span');
                letter.className = 'option-letter';
                letter.innerText = letters[i] + '.';

                const text = document.createElement('span');
                text.innerText = opt;

                btn.appendChild(letter);
                btn.appendChild(text);
                btn.onclick = () => checkAnswer(i, btn);
                container.appendChild(btn);
            });

            if (userAnswers[currentIdx]) {
                const ua = userAnswers[currentIdx];
                const selectedIdx = questions[currentIdx].options.indexOf(ua.selected);
                const correctIdx = questions[currentIdx].answer;
                const allBtns = document.querySelectorAll('.option');
                allBtns.forEach(b => b.disabled = true);
                allBtns[correctIdx].classList.add('correct');
                if (!ua.isCorrect) {
                    allBtns[selectedIdx].classList.add('wrong');
                } else {
                    allBtns[selectedIdx].classList.add('correct');
                }
                document.getElementById('next-btn').style.display = 'block';
            }
        }

        function checkAnswer(selected, btn) {
            const q = questions[currentIdx];
            const allBtns = document.querySelectorAll('.option');

            allBtns.forEach(b => b.disabled = true);

            userAnswers[currentIdx] = {
                question: q.question,
                selected: q.options[selected],
                correct: q.options[q.answer],
                isCorrect: selected === q.answer
            };

            if (selected === q.answer) {
                btn.classList.add('correct');
                score++;
            } else {
                btn.classList.add('wrong');
                allBtns[q.answer].classList.add('correct');
            }

            document.getElementById('next-btn').style.display = 'block';
        }

        function nextQuestion() {
            currentIdx++;
            loadQuestion();
            window.scrollTo(0, 0);
        }

        function prevQuestion() {
            if (currentIdx > 0) {
                currentIdx--;
                loadQuestion();
                window.scrollTo(0, 0);
            }
        }

        function restartQuiz() {
            currentIdx = 0;
            score = 0;
            userAnswers = [];

            // Reset progress bar
            document.getElementById('progress-bar').style.width = '0%';

            // Hide result screen and show quiz screen
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');

            questions = JSON.parse(JSON.stringify(originalQuestions));

            if (shuffleQuestionsEnabled) {
                questions.sort(() => Math.random() - 0.5);
            }

            if (shuffleAnswersEnabled) {
                questions.forEach(q => {
                    const correctAnswer = q.options[q.answer];
                    // Create array of indices and shuffle them
                    const indices = q.options.map((_, i) => i);
                    for (let i = indices.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [indices[i], indices[j]] = [indices[j], indices[i]];
                    }
                    // Reorder options
                    const newOptions = indices.map(i => q.options[i]);
                    q.options = newOptions;
                    q.answer = q.options.indexOf(correctAnswer);
                });
            }

            loadQuestion();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showResult() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            document.getElementById('progress-bar').style.width = '100%';
            document.getElementById('final-score').innerText = `${score} / ${questions.length}`;

            const wrongAnswersSection = document.getElementById('wrong-answers-section');
            const wrongAnswers = userAnswers.filter(a => !a.isCorrect);

            if (wrongAnswers.length === 0) {
                wrongAnswersSection.innerHTML = '<h3>Perfect Score! üéâ</h3><p>You got all questions correct!</p>';
            } else {
                let html = '<h3>Review Wrong Answers:</h3>';
                wrongAnswers.forEach((wa, idx) => {
                    html += `
                        <div class="wrong-item">
                            <strong>Question ${idx + 1}:</strong> ${wa.question}<br>
                            <span style="color: var(--wrong);">‚ùå Your answer: ${wa.selected}</span><br>
                            <span style="color: var(--correct);">‚úì Correct answer: ${wa.correct}</span>
                        </div>
                    `;
                });
                wrongAnswersSection.innerHTML = html;
            }
        }

        // Start the quiz on load
        window.addEventListener('load', startQuiz);
    </script>
</body>

</html>
